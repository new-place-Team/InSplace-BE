<!DOCTYPE html>
<html>

<head>
  <title>Artillery report</title>
  <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.0/d3.min.js' charset='utf-8'></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.6.0/metricsgraphics.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.6.0/metricsgraphics.min.js"></script>

  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
  <link href='https://netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css' rel='stylesheet' type='text/css'>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js" charset="utf-8"></script>

  <style>
    body,
    p,
    li {
      font-family: sans-serif;
      font-size: 10pt;
    }

    h1 {
      font-size: 18pt;
      font-weight: bold;
    }

    #errorsContainer>p {
      color: #009900;
    }

    #footer {
      padding: 1em;
      font-size: 0.8em;
      color: #999;
      text-align: center;
      margin-top: 1em;
      background-color: #eee;
    }

    #editor {
      font-size: 8pt;
      height: 20em;
    }
  </style>

  <script>
    window.Report = {
      "aggregate": {
        "timestamp": "2021-11-12T12:46:23.477Z",
        "scenariosCreated": 600,
        "scenariosCompleted": 600,
        "requestsCompleted": 600,
        "latency": {
          "min": 19,
          "max": 890,
          "median": 22,
          "p95": 64,
          "p99": 333.5
        },
        "rps": {
          "count": 600,
          "mean": 9.93
        },
        "scenarioDuration": {
          "min": 38,
          "max": 913.4,
          "median": 44.7,
          "p95": 122.8,
          "p99": 452.9
        },
        "scenarioCounts": {
          "60초동안 초당 10명이 메인페이지": 600
        },
        "errors": {},
        "codes": {
          "200": 600
        },
        "matches": 0,
        "customStats": {},
        "counters": {},
        "scenariosAvoided": 0,
        "phases": [
          {
            "duration": 60,
            "arrivalRate": 10
          }
        ]
      },
      "intermediate": [
        {
          "timestamp": "2021-11-12T12:45:32.954Z",
          "scenariosCreated": 99,
          "scenariosCompleted": 99,
          "requestsCompleted": 99,
          "latency": {
            "min": 21,
            "max": 203,
            "median": 24,
            "p95": 85.4,
            "p99": 185.4
          },
          "rps": {
            "count": 99,
            "mean": 10.01
          },
          "scenarioDuration": {
            "min": 40.5,
            "max": 223.2,
            "median": 45.5,
            "p95": 107.2,
            "p99": 206.5
          },
          "scenarioCounts": {
            "60초동안 초당 10명이 메인페이지": 99
          },
          "errors": {},
          "codes": {
            "200": 99
          },
          "matches": 0,
          "customStats": {},
          "counters": {},
          "concurrency": 0,
          "pendingRequests": 0,
          "scenariosAvoided": 0
        },
        {
          "timestamp": "2021-11-12T12:45:42.954Z",
          "scenariosCreated": 100,
          "scenariosCompleted": 100,
          "requestsCompleted": 100,
          "latency": {
            "min": 20,
            "max": 38,
            "median": 22,
            "p95": 28,
            "p99": 35.5
          },
          "rps": {
            "count": 100,
            "mean": 10
          },
          "scenarioDuration": {
            "min": 39.5,
            "max": 60.3,
            "median": 44.2,
            "p95": 52,
            "p99": 59.1
          },
          "scenarioCounts": {
            "60초동안 초당 10명이 메인페이지": 100
          },
          "errors": {},
          "codes": {
            "200": 100
          },
          "matches": 0,
          "customStats": {},
          "counters": {},
          "concurrency": 0,
          "pendingRequests": 0,
          "scenariosAvoided": 0
        },
        {
          "timestamp": "2021-11-12T12:45:52.951Z",
          "scenariosCreated": 100,
          "scenariosCompleted": 100,
          "requestsCompleted": 100,
          "latency": {
            "min": 20,
            "max": 122,
            "median": 22,
            "p95": 30,
            "p99": 78
          },
          "rps": {
            "count": 100,
            "mean": 10
          },
          "scenarioDuration": {
            "min": 39.1,
            "max": 152.9,
            "median": 44.5,
            "p95": 54.4,
            "p99": 113.6
          },
          "scenarioCounts": {
            "60초동안 초당 10명이 메인페이지": 100
          },
          "errors": {},
          "codes": {
            "200": 100
          },
          "matches": 0,
          "customStats": {},
          "counters": {},
          "concurrency": 0,
          "pendingRequests": 0,
          "scenariosAvoided": 0
        },
        {
          "timestamp": "2021-11-12T12:46:02.951Z",
          "scenariosCreated": 100,
          "scenariosCompleted": 100,
          "requestsCompleted": 100,
          "latency": {
            "min": 20,
            "max": 890,
            "median": 22,
            "p95": 430.5,
            "p99": 831
          },
          "rps": {
            "count": 100,
            "mean": 10
          },
          "scenarioDuration": {
            "min": 38.9,
            "max": 913.4,
            "median": 44.1,
            "p95": 452.8,
            "p99": 854.2
          },
          "scenarioCounts": {
            "60초동안 초당 10명이 메인페이지": 100
          },
          "errors": {},
          "codes": {
            "200": 100
          },
          "matches": 0,
          "customStats": {},
          "counters": {},
          "concurrency": 0,
          "pendingRequests": 0,
          "scenariosAvoided": 0
        },
        {
          "timestamp": "2021-11-12T12:46:12.952Z",
          "scenariosCreated": 100,
          "scenariosCompleted": 100,
          "requestsCompleted": 100,
          "latency": {
            "min": 20,
            "max": 44,
            "median": 22,
            "p95": 28.5,
            "p99": 43.5
          },
          "rps": {
            "count": 100,
            "mean": 10
          },
          "scenarioDuration": {
            "min": 39.7,
            "max": 141.1,
            "median": 44.8,
            "p95": 56.3,
            "p99": 118.1
          },
          "scenarioCounts": {
            "60초동안 초당 10명이 메인페이지": 100
          },
          "errors": {},
          "codes": {
            "200": 100
          },
          "matches": 0,
          "customStats": {},
          "counters": {},
          "concurrency": 0,
          "pendingRequests": 0,
          "scenariosAvoided": 0
        },
        {
          "timestamp": "2021-11-12T12:46:22.949Z",
          "scenariosCreated": 100,
          "scenariosCompleted": 100,
          "requestsCompleted": 100,
          "latency": {
            "min": 19,
            "max": 284,
            "median": 23,
            "p95": 94.5,
            "p99": 281
          },
          "rps": {
            "count": 100,
            "mean": 10
          },
          "scenarioDuration": {
            "min": 38,
            "max": 502.6,
            "median": 46.2,
            "p95": 255.9,
            "p99": 452.9
          },
          "scenarioCounts": {
            "60초동안 초당 10명이 메인페이지": 100
          },
          "errors": {},
          "codes": {
            "200": 100
          },
          "matches": 0,
          "customStats": {},
          "counters": {},
          "concurrency": 0,
          "pendingRequests": 0,
          "scenariosAvoided": 0
        },
        {
          "timestamp": "2021-11-12T12:46:23.468Z",
          "scenariosCreated": 1,
          "scenariosCompleted": 1,
          "requestsCompleted": 1,
          "latency": {
            "min": 28,
            "max": 28,
            "median": 28,
            "p95": 28,
            "p99": 28
          },
          "rps": {
            "count": 1,
            "mean": 1.96
          },
          "scenarioDuration": {
            "min": 50,
            "max": 50,
            "median": 50,
            "p95": 50,
            "p99": 50
          },
          "scenarioCounts": {
            "60초동안 초당 10명이 메인페이지": 1
          },
          "errors": {},
          "codes": {
            "200": 1
          },
          "matches": 0,
          "customStats": {},
          "counters": {},
          "concurrency": 0,
          "pendingRequests": 0,
          "scenariosAvoided": 0
        }
      ]
    };
  </script>

  <style>
    h1 {
      line-height: 200%;
    }

    body {
      background-color: #fcfcfc;
    }

    .container {
      width: 100%;
      min-width: 960px;
    }
  </style>


</head>

<body>

  <div class="container">

    <div class="row" id="header">
      <div class="col-lg-4 col-lg-offset-4">
        <pre style="font-size: 5pt; background-color: #fcfcfc; border: none;">
            _   _ _ _                                                _
  __ _ _ __| |_(_) | | ___ _ __ _   _      _ __ ___ _ __   ___  _ __| |_
 / _` | '__| __| | | |/ _ \ '__| | | |    | '__/ _ \ '_ \ / _ \| '__| __|
| (_| | |  | |_| | | |  __/ |  | |_| |    | | |  __/ |_) | (_) | |  | |_
 \__,_|_|   \__|_|_|_|\___|_|   \__, |    |_|  \___| .__/ \___/|_|   \__|
                                |___/              |_|

    </pre>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <h1 class="text-center" id="page-title">Test run on <span id="timestamp">date</span></h1>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-3">
        <p><strong>Summary</strong></p>
        <table class="table table-bordered table-hover table-condensed">
          <tbody>
            <tr>
              <td>Test duration</td>
              <td><span id="testDuration">0</span> sec</td>
            </tr>
            <tr>
              <td>Scenarios created</td>
              <td><span id="scenariosCreated">0</span></td>
            </tr>

            <tr>
              <td>Scenarios completed</td>
              <td><span id="scenariosCompleted">0</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="col-lg-5" id="scenarioCountsContainer">
        <div>
          <strong>Scenario counts:</strong>

          <p></p>

          <table class="table table-bordered table-hover table-condensed" id="scenarioCounts">
          </table>
        </div>
      </div>

      <div class="col-lg-1">
        <div id="codesContainer">
          <strong>Codes</strong>

          <p></p>

          <table class="table table-bordered table-hover table-condensed" id="codes">
          </table>
        </div>
      </div>

      <div class="col-lg-3">
        <div id="errorsContainer">
          <strong>Errors</strong>

          <p></p>

          <table class="table table-bordered table-hover table-condensed" id="errors">
          </table>
        </div>
      </div>
    </div> <!-- /.row -->

    <div class="row">
      <div class="text-center col-lg-12">
        <h2>Charts</h2>
      </div>
    </div>

    <div class="row">
      <div class="latency-histogram text-center col-lg-12"></div>
    </div>

    <div class="row">
      <div class="latency text-center col-lg-12"></div>
    </div>

    <div class="latency-legend"></div>

    <div class="row">

    </div>

    <div class="row">
      <div class="concurrency text-center col-lg-12"></div>
    </div>

    <div class="row">
      <div class="rps-mean text-center col-lg-12"></div>
    </div>
    <div class="row">
      <div class="rps-count text-center col-lg-12"></div>
    </div>

    <div class="row">
      <div class="codes-line text-center col-lg-12"></div>
    </div>
    <div class="row">
      <div class="errors-line text-center col-lg-12"></div>
    </div>





  </div>

  <div class="row">
    <div class="col-lg-8 col-lg-offset-2">
      <h3 class="text-center">Raw report data</h3>
      <p>This is the raw JSON stats output that the report was generated from.</p>
      <div id="editor">
      </div>
    </div>
  </div>

  <script>
    var editor = ace.edit("editor");
    editor.getSession().setMode("ace/mode/javascript");
    editor.setValue(JSON.stringify(Report, null, 2));
    editor.gotoLine(1); editor.setHighlightActiveLine(false);

    var l = _;

    $('#timestamp').html(moment(Report.aggregate.timestamp).format('DD MMM YYYY HH:mm:SS'));
    $('#testDuration').html(l.size(Report.intermediate) * 10);
    $('#scenariosCompleted').html(Report.aggregate.scenariosCompleted);
    $('#scenariosCreated').html(Report.aggregate.scenariosCreated);

    var markers = [];
    if (l.size(Report.phases) > 0) {
      markers = l.foldl(Report.phases, function (acc, phase, index) {
        var label = phase.name || 'Phase ' + (index + 1);
        var timestamp = (index === 0) ? 0 : Report.phases[index - 1].duration + acc[index - 1].timestamp;

        acc.push({
          timestamp: timestamp,
          label: label
        });

        return acc;
      }, []);
    }

    if (l.size(Report.aggregate.scenarioCounts) > 0) {
      l.each(Report.aggregate.scenarioCounts, function (count, name) {
        var $tdName = $('<td>' + name + '</td>');
        var percentage = Math.round(count / Report.aggregate.scenariosCreated * 100 * 1000) / 1000;
        var $tdCount = $('<td>' + count + ' (' + percentage + '%)' + '</td>');
        var $el = $('<tr></tr>')
          .append($tdName)
          .append($tdCount)
          .appendTo($('#scenarioCounts'));
      });
    } else {
      $('#scenarioCountsContainer').hide();
    }

    if (l.size(Report.aggregate.codes) > 0) {
      l.each(Report.aggregate.codes, function (count, code) {
        var anchor = '';
        if (code >= 100 && code < 200) {
          anchor = '#1xx_Informational';
        } else if (code >= 200 && code < 300) {
          anchor = '#2xx_Success';
        } else if (code >= 300 && code < 400) {
          anchor = '#3xx_Redirection';
        } else if (code >= 400 && code < 500) {
          anchor = '#4xx_Client_Error';
        } else if (code >= 500 && code < 600) {
          anchor = '#5xx_Server_Error';
        }

        var $a = $('<a>' + code + '</a>').attr('href', 'https://en.wikipedia.org/wiki/List_of_HTTP_status_codes' + anchor);
        var $td = $('<td></td>').append($a);
        var $el = $('<tr></tr>')
          .append($td)
          .append($('<td>' + count + '</td>'))
          .appendTo($('#codes'));
      });
    } else {
      $('#codesContainer').hide();
    }

    if (l.size(Report.aggregate.errors) > 0) {
      l.each(Report.aggregate.errors, function (count, code) {
        var $el = $('<tr></tr>')
          .append($('<td>' + code + '</td>'))
          .append($('<td>' + count + '</td>'))
          .appendTo($('#errors'));
      });
    } else {
      $('#errorsContainer > p').html('&#10004; Test completed without network or OS errors.');
    }

    var histogramData = l.map(Report.aggregate.latency, function (v, k) { return { bin: k, value: v } });

    MG.data_graphic({
      chart_type: 'bar',
      x_label: 'Percentile',
      y_label: '(ms)',
      animate_on_load: true,
      title: 'Overall Latency Distribution',
      description: 'Distribution of all observed response latencies',
      target: '.latency-histogram',
      data: histogramData,
      x_accessor: 'bin',
      y_accessor: 'value',
      binned: true,
      height: 250,
      interpolate: 'monotone',
      padding_percentage: 0,
      bar_orientation: 'vertical',
      width: 450
    });

    var chartData = l.map(
      window.Report.intermediate,
      function (o, i) {
        return {
          timestamp: i * 10 + 10,

          rpsMean: o.rps.mean,
          rpsCount: o.rps.count,
          concurrency: o.concurrency,
          latencyMax: o.latency.max,
          latencyp99: o.latency.p99,
          latencyp95: o.latency.p95,
          latencyMedian: o.latency.median,
          latencyMin: o.latency.min
        }
      });

    //
    // Response codes
    //

    if (l.size(Report.aggregate.codes) > 0) {
      var codesData = l.foldl(Report.intermediate, function (acc, o, i) {
        var res = {};
        res.timestamp = i * 10 + 10;
        l.each(o.codes, function (count, code) {
          res[code] = count;
        });
        acc.push(res);
        return acc;
      }, []);
      var uniqueCodes = l.foldl(Report.intermediate, function (acc, o) {
        l.each(o.codes, function (count, code) {
          if (l.indexOf(acc, code) === -1) {
            acc.push(code);
          }
        });
        return acc;
      }, []);

      MG.data_graphic({
        x_label: 'Time',
        y_label: 'Count',
        title: 'HTTP codes',
        description: 'Occurence of HTTP response codes',
        target: '.codes-line',
        data: codesData,
        x_accessor: 'timestamp',
        y_accessor: uniqueCodes,
        legend: uniqueCodes,
        right: 50,
        chart_type: 'line',
        area: false,
        markers: markers,
        width: 900
      });
    }

    //
    // Errors
    //

    if (l.size(Report.aggregate.errors) > 0) {
      var errorData = l.foldl(Report.intermediate, function (acc, o, i) {
        var res = {};
        res.timestamp = i * 10 + 10;
        l.each(o.errors, function (count, name) {
          res[name] = count;
        });
        acc.push(res);
        return acc;
      }, []);
      var uniqueErrors = l.foldl(Report.intermediate, function (acc, o) {
        l.each(o.errors, function (count, name) {
          if (l.indexOf(acc, name) === -1) {
            acc.push(name);
          }
        });
        return acc;
      }, []);

      MG.data_graphic({
        title: 'Error Codes',
        description: 'Occurence of error codes',
        target: '.errors-line',
        data: errorData,
        x_accessor: 'timestamp',
        y_accessor: uniqueErrors,
        chart_type: 'line',
        area: false,
        markers: markers
      });

    }

    //
    // Latency
    //
    MG.data_graphic({
      chart_type: 'line',
      x_label: 'Time',
      y_label: '(ms)',
      animate_on_load: true,
      area: false,
      title: "Latency At Intervals",
      description: "Latency values at different points during the test run",
      data: chartData,
      target: '.latency',
      width: 900,
      x_accessor: 'timestamp',
      y_accessor: ['latencyMin', 'latencyMedian', 'latencyp95', 'latencyMax'],
      legend: ['min', 'p50', 'p95', 'max'],
      //legend_target: '.latency-legend',
      right: 50,
      interpolate: 'monotone',
      mouseover: function (d, i) {
      },
      markers: markers
    });

    MG.data_graphic({
      animate_on_load: true,
      area: false,
      y_label: 'Count',
      x_label: 'Time',
      title: 'Concurrent users',
      description: 'Concurrent users',
      data: chartData,
      target: '.concurrency',
      x_accessor: 'timestamp',
      y_accessor: ['concurrency'],
      interpolate: 'monotone',
      markers: markers,
      width: 900
    });

    MG.data_graphic({
      animate_on_load: true,
      area: false,
      y_label: 'Count',
      x_label: 'Time',
      title: 'Mean RPS',
      description: 'Mean requests per second',
      data: chartData,
      target: '.rps-mean',
      x_accessor: 'timestamp',
      y_accessor: ['rpsMean'],
      interpolate: 'monotone',
      markers: markers,
      width: 900
    });

    MG.data_graphic({
      animate_on_load: true,
      area: false,
      y_label: 'Count',
      x_label: 'Time',
      title: 'RPS Count',
      description: 'Count of requests per second',
      data: chartData,
      target: '.rps-count',
      x_accessor: 'timestamp',
      y_accessor: ['rpsCount'],
      interpolate: 'monotone',
      markers: markers,
      width: 900
    });
  </script>
  <div id="footer">
    <footer>This report was created with <a href="https://artillery.io">Artillery</a> - free open-source load-testing
      for HTTP and WebSockets</footer>
  </div>
</body>

</html>